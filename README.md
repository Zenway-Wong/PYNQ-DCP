# Haze Removal of video stream with PYNQ

This is a vision design for [2021 Xilinx summer school](https://github.com/xupsh/2021_summercamp_project), to implement and accelerate [haze removal](http://mmlab.ie.cuhk.edu.hk/archive/2009/dehaze_cvpr2009.pdf) algorithm based on PYNQ platform. It includes the details from software algorithm to hardware acceleration.

You can stream the haze removal result of your laptop display to another monitor:

<img src="https://github.com/Zenway-Wong/PYNQ-DCP/blob/main/image/RGB.png" width="50%">

And also the depth map estimated by thickness of haze:

<img src="https://github.com/Zenway-Wong/PYNQ-DCP/blob/main/image/GRAY.png" width="50%">

## Requirements

* Board: PYNQ-Z2
* PYNQ Image: PYNQ v2.6
* Install [composable overlay](https://github.com/Xilinx/PYNQ_Composable_Pipeline)

## Usage

Browse the ipython notebooks in Jupyter Lab after clone. 

Then copy the folder containing composable overlay bitstream into this repo.

## Notebook decriptions

* 0: some bugs (ignore it)
* 1: introduce and improve the DCP haze removal algorithm
* 2: process video stream with base overlay, using previous algorithm and interactive feature of ipthon 
* 3: replace base overlay with composable overlay
* 4: accelerate haze removal with IP core generated by HLS
